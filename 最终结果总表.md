# 最终结果总表（当前版本）

## 主结果（同一评测集）

- 评测集：`data/processed/retrieval_benchmark_v1.jsonl`（300 queries）
- 语料库：`data/processed/retrieval_corpus_v1.jsonl`（54 docs）
- Dual 配置：`alpha=0.0, tau=0.6`
- Top-k 指标口径：`@10`

| Method | Recall@10 | Recall@100 | NDCG@10 | CCR@10 | Proxy Faithfulness | Negation Failure Rate |
| --- | ---: | ---: | ---: | ---: | ---: | ---: |
| Vanilla (Topic Retriever) | 0.6617 | 1.0000 | 0.6533 | 0.1987 | 0.1367 | 1.0000 |
| **Dual (Topic + Constraint)** | **0.7178** | **1.0000** | **0.7230** | **0.2323** | **0.2600** | 1.0000 |
| BM25 | 0.5456 | 1.0000 | 0.5421 | 0.0863 | - | - |
| Cross-Encoder (NLI-RoBERTa cache) | 0.4067 | 1.0000 | 0.3804 | 0.1660 | - | - |

## 延迟对比（60 queries）

- 来源：`outputs/reports/latency_benchmark_report_with_cross.json`

| Method | Mean Latency (ms) | P50 (ms) | P95 (ms) |
| --- | ---: | ---: | ---: |
| Vanilla (Topic Retriever) | 218.68 | 225.39 | 243.39 |
| Dual (Topic + Constraint) | 221.01 | 226.17 | 247.29 |
| BM25 | 0.08 | 0.07 | 0.10 |
| Cross-Encoder (rerank segment) | 134.65 | 133.29 | 146.98 |

## 增益汇总（Dual vs Vanilla）

- `Recall@10`: `+0.0561`
- `NDCG@10`: `+0.0697`
- `CCR@10`: `+0.0337`
- `Proxy Faithfulness`: `+0.1233`

## 说明（解读边界）

1. `Cross-Encoder` 使用的是本地缓存的 `cross-encoder/nli-roberta-base`（NLI 模型），并非专门 IR reranker，结果偏弱属预期。  
2. `Proxy Faithfulness` 来自 `rag_e2e_eval.py` 的代理口径（基于 top1 约束满足），不等价于完整 LLM judge。  
3. `Cross-Encoder` 延迟是 rerank 段测量值；与全链路系统延迟对比时需标注这一点。  

## 原始报告路径

- `outputs/reports/retrieval_metrics_local_dual.json`
- `outputs/reports/bm25_metrics_report.json`
- `outputs/reports/cross_encoder_metrics_report.json`
- `outputs/reports/rag_e2e_proxy_vanilla.json`
- `outputs/reports/rag_e2e_proxy_dual.json`
- `outputs/reports/latency_benchmark_report_with_cross.json`

